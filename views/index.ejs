<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <title>Cemilan Ceria - Puding & Cemilan Enak, Sehat, Berkualitas | Jakarta</title>
  <meta name="description" content="Cemilan Ceria menyediakan puding segar, cireng gurih, dan berbagai cemilan berkualitas tinggi dengan bahan alami terbaik. Pesan online sekarang untuk pengalaman cemilan yang tak terlupakan!">
  <meta name="keywords" content="cemilan sehat, puding enak, cireng gurih, jajanan Jakarta, snack berkualitas, cemilan online, makanan ringan, puding segar, cemilan ceria">
  <meta name="author" content="Cemilan Ceria">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://cemilanceria.web.id/">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cemilanceria.web.id/">
  <meta property="og:title" content="Cemilan Ceria - Puding & Cemilan Enak, Sehat, Berkualitas">
  <meta property="og:description" content="Nikmati berbagai pilihan puding segar dan cemilan berkualitas tinggi. Pesan online mudah dan cepat!">
  <meta property="og:image" content="https://cemilanceria.web.id/img/og-image.jpg">
  <meta property="og:locale" content="id_ID">
  <meta property="og:site_name" content="Cemilan Ceria">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://cemilanceria.web.id/">
  <meta name="twitter:title" content="Cemilan Ceria - Puding & Cemilan Enak, Sehat, Berkualitas">
  <meta name="twitter:description" content="Nikmati berbagai pilihan puding segar dan cemilan berkualitas tinggi. Pesan online mudah dan cepat!">
  <meta name="twitter:image" content="https://cemilanceria.web.id/img/og-image.jpg">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  
  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <%- include('partials/gtag') %>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary': '#f59e0b',
            'primary-dark': '#d97706',
            'secondary': '#1e293b',
          },
          fontFamily: {
            'poppins': ['Poppins', 'sans-serif'],
          },
          animation: {
            'float': 'float 3s ease-in-out infinite',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-10px)' },
            }
          }
        }
      }
    }
  </script>

  <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .carousel-slide {
            transition: opacity 0.7s ease-in-out;
        }
    </style>
  
  <!-- Structured Data / JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Cemilan Ceria",
    "image": "https://cemilanceria.web.id/img/logo.jpg",
    "@id": "https://cemilanceria.web.id",
    "url": "https://cemilanceria.web.id",
    "telephone": "+62-821-1209-8585",
    "priceRange": "Rp 5.000 - Rp 50.000",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Jl. Raya Pasar Minggu No. 10",
      "addressLocality": "Jakarta Selatan",
      "postalCode": "12510",
      "addressCountry": "ID"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": -6.2854,
      "longitude": 106.8455
    },
    "openingHoursSpecification": [
      {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": [
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
          "Sunday"
        ],
        "opens": "08:00",
        "closes": "20:00"
      }
    ],
    "sameAs": [
      "https://www.instagram.com/cemilanceria",
      "https://www.facebook.com/cemilanceria"
    ],
    "description": "Cemilan Ceria menyediakan puding segar, cireng gurih, dan berbagai cemilan berkualitas tinggi dengan bahan alami terbaik."
  }
  </script>
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Cemilan Ceria",
    "url": "https://cemilanceria.web.id",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://cemilanceria.web.id/products?search={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
</head>
<body class="text-gray-800">

    <%- include('partials/navbar') %>

    <div class="max-w-7xl mx-auto flex flex-col min-h-screen">

        <main class="flex-grow space-y-12 pb-12 w-full px-4">
            
            <section class="mt-6">
                <div class="relative h-64 md:h-96 w-full overflow-hidden rounded-2xl shadow-xl group">
                    <div id="carousel-container">
                        
                        <% if (carouselProducts && carouselProducts.length > 0) { %>
                            <% carouselProducts.forEach((product, index) => { %>
                                <div class="carousel-slide absolute inset-0 w-full h-full <%= index === 0 ? 'opacity-100' : 'opacity-0' %>">
                                    <img src="<%= product.imageUrl || 'https://via.placeholder.com/800x400?text=' + encodeURIComponent(product.name) %>"
                                        class="w-full h-full object-cover" 
                                        alt="<%= product.name %>" 
                                        onerror="this.src='https://via.placeholder.com/800x400?text=<%= encodeURIComponent(product.name) %>'" />
                                    <div class="absolute inset-0 bg-black/40 flex flex-col items-center justify-center text-center p-8">
                                        <h2 class="text-3xl md:text-5xl font-bold text-white mb-4 drop-shadow-md">
                                            <%= product.name %>
                                        </h2>
                                        <p class="text-white text-lg md:text-xl font-medium max-w-2xl drop-shadow-sm">
                                            <%= product.description || 'Produk berkualitas untuk Anda!' %>
                                        </p>
                                        <a href="/products" class="mt-6 px-6 py-2 bg-white text-amber-600 font-bold rounded-full hover:bg-gray-100 transition shadow-lg">
                                            Lihat Detail
                                        </a>
                                    </div>
                                </div>
                            <% }) %>
                        <% } else { %>
                            <!-- Fallback jika tidak ada produk -->
                            <div class="carousel-slide absolute inset-0 w-full h-full opacity-100">
                                <img src="https://via.placeholder.com/800x400?text=Cemilan+Ceria"
                                    class="w-full h-full object-cover" 
                                    alt="Cemilan Ceria" />
                                <div class="absolute inset-0 bg-black/40 flex flex-col items-center justify-center text-center p-8">
                                    <h2 class="text-3xl md:text-5xl font-bold text-white mb-4 drop-shadow-md">
                                        Selamat Datang di Cemilan Ceria
                                    </h2>
                                    <p class="text-white text-lg md:text-xl font-medium max-w-2xl drop-shadow-sm">
                                        Nikmati berbagai cemilan lezat kami!
                                    </p>
                                    <a href="/products" class="mt-6 px-6 py-2 bg-white text-amber-600 font-bold rounded-full hover:bg-gray-100 transition shadow-lg">
                                        Lihat Produk
                                    </a>
                                </div>
                            </div>
                        <% } %>

                    </div>

                    <% if (carouselProducts && carouselProducts.length > 1) { %>
                    <button id="prevBtn"
                        class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 p-3 rounded-full text-white backdrop-blur-sm transition-all opacity-0 group-hover:opacity-100 z-10">
                        <i class="fa-solid fa-chevron-left fa-lg"></i>
                    </button>

                    <button id="nextBtn"
                        class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/30 hover:bg-white/50 p-3 rounded-full text-white backdrop-blur-sm transition-all opacity-0 group-hover:opacity-100 z-10">
                        <i class="fa-solid fa-chevron-right fa-lg"></i>
                    </button>

                    <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-10" id="indicators">
                        <% if (carouselProducts && carouselProducts.length > 0) { %>
                            <% carouselProducts.forEach((product, index) => { %>
                                <button class="<%= index === 0 ? 'w-6' : 'w-3' %> h-3 rounded-full <%= index === 0 ? 'bg-white' : 'bg-white/50' %> transition-all" data-index="<%= index %>" aria-label="Slide <%= index + 1 %>"></button>
                            <% }) %>
                        <% } else { %>
                            <button class="w-6 h-3 rounded-full bg-white transition-all" data-index="0" aria-label="Slide 1"></button>
                        <% } %>
                    </div>
                    <% } %>
                </div>
            </section>

            <section id="produk" class="py-4">
                <div class="text-center mb-12">
                    <span class="text-amber-600 font-semibold tracking-wider uppercase text-sm">Menu Favorit</span>
                    <h2 class="text-4xl font-bold text-gray-800 mt-2">Produk Unggulan</h2>
                    <div class="w-24 h-1 bg-amber-500 mx-auto mt-4 rounded-full"></div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <% if (featuredProducts && featuredProducts.length > 0) { %>
                        <% featuredProducts.forEach(product => { %>
                            <div class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden group flex flex-col h-full border border-gray-100">
                                <div class="relative overflow-hidden h-56">
                                    <% if (product.imageUrl) { %>
                                        <img src="<%= product.imageUrl %>" alt="<%= product.name %>" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500" 
                                        onerror="this.src='https://via.placeholder.com/400x300?text=<%= encodeURIComponent(product.name) %>'" />
                                    <% } else { %>
                                        <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-amber-100 to-amber-200">
                                            <i class="bi bi-image text-6xl text-amber-400"></i>
                                        </div>
                                    <% } %>
                                </div>
                                <div class="p-6 flex-grow flex flex-col">
                                    <% if (product.category) { %>
                                        <span class="text-xs font-semibold text-amber-500 uppercase tracking-wider mb-1 inline-block">
                                            <%= product.category %>
                                        </span>
                                    <% } %>
                                    <h3 class="text-xl font-bold text-gray-800 mb-2"><%= product.name %></h3>
                                    <p class="text-gray-600 text-sm mb-4 line-clamp-3 flex-grow">
                                        <%= product.description || 'Produk berkualitas untuk Anda!' %>
                                    </p>
                                    <div class="mt-auto flex justify-between items-center pt-4 border-t border-gray-100">
                                        <div class="flex flex-col">
                                            <span class="text-xs text-gray-500">Harga</span>
                                            <span class="text-xl font-bold text-amber-600">Rp <%= product.price.toLocaleString('id-ID') %></span>
                                        </div>
                                        <% if (product.stock > 0) { %>
                                            <button class="add-to-cart bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-xl transition-colors shadow-md flex items-center gap-2" 
                                                data-product-id="<%= product.id %>"
                                                data-product-name="<%= product.name %>" 
                                                data-price="<%= product.price %>"
                                                data-image="<%= product.imageUrl || '' %>">
                                                <i class="fa-solid fa-bag-shopping"></i>
                                                <span class="font-medium text-sm">Tambah</span>
                                            </button>
                                        <% } else { %>
                                            <button class="bg-gray-400 text-white px-4 py-2 rounded-xl cursor-not-allowed flex items-center gap-2" disabled>
                                                <i class="fa-solid fa-times"></i>
                                                <span class="font-medium text-sm">Habis</span>
                                            </button>
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                        <% }) %>
                    <% } else { %>
                        <!-- Fallback jika tidak ada produk -->
                        <div class="col-span-full text-center py-12">
                            <i class="bi bi-emoji-frown text-6xl text-amber-400 mb-4 block"></i>
                            <h3 class="text-2xl font-bold text-gray-700 mb-2">Belum ada produk</h3>
                            <p class="text-gray-500 mb-4">Produk akan segera hadir!</p>
                            <a href="/products" class="inline-block bg-amber-500 text-white px-6 py-3 rounded-lg hover:bg-amber-600 transition">
                                Lihat Semua Produk
                            </a>
                        </div>
                    <% } %>

                </div>
            </section>
            
            <hr class="border-amber-100"/>

            <section id="lokasi" class="py-4">
                <div class="text-center mb-12">
                    <span class="text-amber-600 font-semibold tracking-wider uppercase text-sm">Lokasi Kami</span>
                    <h2 class="text-4xl font-bold text-gray-800 mt-2">Kunjungi Toko Kami</h2>
                    <div class="w-24 h-1 bg-amber-500 mx-auto mt-4 rounded-full"></div>
                </div>

                <div class="flex flex-col lg:flex-row gap-8 lg:gap-12 bg-amber-50 rounded-3xl overflow-hidden shadow-xl border border-amber-100">
                    <div class="lg:w-1/3 p-8 lg:p-12 flex flex-col justify-center space-y-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-2">Informasi Kontak</h3>
                        
                        <div class="space-y-6">
                            <div class="flex items-start space-x-4">
                                <div class="bg-amber-100 p-3 rounded-full text-amber-600">
                                    <i class="fa-solid fa-location-dot fa-lg"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800">Alamat</h4>
                                    <p class="text-gray-600 mt-1">
                                        Jl. Baladewa Gang Mushola Alhikmah<br />
                                        Cikampek Barat, Kab. Karawang, Jawa Barat 41373
                                    </p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-4">
                                <div class="bg-amber-100 p-3 rounded-full text-amber-600">
                                    <i class="fa-solid fa-phone fa-lg"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800">Telepon / WA</h4>
                                    <p href class="text-gray-600 mt-1">+62 856-9251-7903</p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-4">
                                <div class="bg-amber-100 p-3 rounded-full text-amber-600">
                                    <i class="fa-solid fa-clock fa-lg"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800">Jam Operasional</h4>
                                    <p class="text-gray-600 mt-1">Senin - Sabtu: 09.00 - 21.00</p>
                                    <p class="text-gray-600">Sabtu-Minggu: Tutup</p>
                                </div>
                            </div>
                        </div>

                        <a href="https://maps.app.goo.gl/wwYPgEtSHhRJo3657" target="_blank" class="bg-amber-500 text-white text-center py-3 rounded-xl font-semibold hover:bg-amber-600 transition shadow-lg flex items-center justify-center gap-2">
                            <i class="fa-solid fa-paper-plane"></i>
                            Buka di Google Maps
                        </a>
                    </div>

                    <div class="lg:w-2/3 h-80 lg:h-auto min-h-[400px] relative bg-gray-200">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15858.971277158376!2d107.45209705!3d-6.3951566!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e693b482312b6b5%3A0xc3f15c542a498007!2sJln%20Baladewa%2C%20Cikampek%20Barat%2C%20Kab.%20Karawang%2C%20Jawa%20Barat!5e0!3m2!1sen!2sid!4v1701620000000!5m2!1sen!2sid" 
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            class="absolute inset-0 w-full h-full"
                            title="Lokasi Toko Kami di Jakarta Selatan"
                        ></iframe>
                    </div>
                </div>
            </section>
            <hr class="border-amber-100"/>

        </main>

        
    </div>
    
    <%- include('partials/footer') %>

    <script>
        // Logika Carousel
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('.carousel-slide');
            const indicators = document.querySelectorAll('#indicators button');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            let currentSlide = 0;
            let slideInterval;
            const slideDuration = 5000; // 5 detik

            function showSlide(index) {
                const newIndex = (index + slides.length) % slides.length;
                
                slides.forEach((slide, i) => {
                    if (i === newIndex) {
                        slide.classList.remove('opacity-0');
                        slide.classList.add('opacity-100');
                    } else {
                        slide.classList.remove('opacity-100');
                        slide.classList.add('opacity-0');
                    }
                });

                indicators.forEach((ind, i) => {
                    if (i === newIndex) {
                        ind.classList.remove('bg-white/50', 'w-3');
                        ind.classList.add('bg-white', 'w-6');
                    } else {
                        ind.classList.remove('bg-white', 'w-6');
                        ind.classList.add('bg-white/50', 'w-3');
                    }
                });
                currentSlide = newIndex;
            }

            function next() {
                showSlide(currentSlide + 1);
            }

            function prev() {
                showSlide(currentSlide - 1);
            }

            function startAutoSlide() {
                slideInterval = setInterval(next, slideDuration);
            }

            function resetAutoSlide() {
                clearInterval(slideInterval);
                startAutoSlide();
            }

            // Event Listeners Carousel
            nextBtn.addEventListener('click', () => {
                next();
                resetAutoSlide();
            });

            prevBtn.addEventListener('click', () => {
                prev();
                resetAutoSlide();
            });

            indicators.forEach((ind, i) => {
                ind.addEventListener('click', () => {
                    showSlide(i);
                    resetAutoSlide();
                });
            });

            // Inisialisasi Carousel
            showSlide(0); // Tampilkan slide pertama
            startAutoSlide(); // Mulai auto-slide
        });

        // Logika Keranjang - Sama seperti di products.ejs
        document.addEventListener('DOMContentLoaded', function () {
            const addToCartButtons = document.querySelectorAll('.add-to-cart');

            addToCartButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const productId = parseInt(this.getAttribute('data-product-id'));
                    const productName = this.getAttribute('data-product-name');
                    const price = parseInt(this.getAttribute('data-price'));
                    const image = this.getAttribute('data-image');
                    let cart = JSON.parse(localStorage.getItem('cart') || '[]');

                    // Jika produk sudah ada (cek berdasarkan productId), tambahkan qty
                    const existing = cart.find(item => item.productId === productId);
                    
                    if (existing) {
                        existing.qty = (existing.qty || 1) + 1;
                    } else {
                        cart.push({ productId, product: productName, price, image, qty: 1 });
                    }

                    // Simpan ke localStorage
                    localStorage.setItem('cart', JSON.stringify(cart));

                    // Update navbar cart jika fungsi tersedia
                    if (typeof window.updateCart === 'function') {
                        window.updateCart();
                    }

                    // Efek klik halus
                    button.classList.add('scale-95');
                    setTimeout(() => {
                        button.classList.remove('scale-95');
                    }, 150);

                    // SweetAlert2 Toast
                    const Toast = Swal.mixin({
                        toast: true,
                        position: 'bottom-end',
                        showConfirmButton: false,
                        timer: 2200,
                        timerProgressBar: true,
                        customClass: {
                            popup: 'colored-toast'
                        }
                    });

                    const currentQty = existing ? existing.qty : 1;
                    
                    Toast.fire({
                        icon: 'success',
                        title: `${productName} ditambahkan (${currentQty}x)`
                    });
                });
            });
        });

    </script>
    
    <style>
        /* SweetAlert2 Toast Custom Style - sama seperti products.ejs */
        .colored-toast.swal2-icon-success {
            background-color: #f0f0f0 !important;
        }
        .colored-toast .swal2-title {
            font-size: 14px !important;
            font-weight: 600 !important;
            color: #975b00 !important;
        }
        .colored-toast .swal2-icon {
            width: 32px !important;
            height: 32px !important;
            border-width: 2px !important;
            margin: 0 8px 0 0 !important;
        }
        .colored-toast .swal2-icon .swal2-icon-content {
            font-size: 18px !important;
        }
        .colored-toast {
            padding: 10px 16px !important;
            min-width: auto !important;
        }
        .colored-toast .swal2-timer-progress-bar {
            background-color: rgba(226, 109, 0, 0.911) !important;
        }
    </style>
</body>
</html>